<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>栈协调 | 有爱心安 - 花期</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="杂乱无章的技术博客">
    
    <link rel="preload" href="/assets/css/0.styles.35bcedcf.css" as="style"><link rel="preload" href="/assets/js/app.74591230.js" as="script"><link rel="preload" href="/assets/js/2.662f3f24.js" as="script"><link rel="preload" href="/assets/js/38.701dbff2.js" as="script"><link rel="prefetch" href="/assets/js/10.6f0d4e47.js"><link rel="prefetch" href="/assets/js/11.50c5bc81.js"><link rel="prefetch" href="/assets/js/12.e1161c0e.js"><link rel="prefetch" href="/assets/js/13.4b104cfc.js"><link rel="prefetch" href="/assets/js/14.30955a9c.js"><link rel="prefetch" href="/assets/js/15.c8f31d7f.js"><link rel="prefetch" href="/assets/js/16.c21ef4c6.js"><link rel="prefetch" href="/assets/js/17.5d7e77b9.js"><link rel="prefetch" href="/assets/js/18.9aba9ca1.js"><link rel="prefetch" href="/assets/js/19.b73a86fe.js"><link rel="prefetch" href="/assets/js/20.1f415092.js"><link rel="prefetch" href="/assets/js/21.dda3b088.js"><link rel="prefetch" href="/assets/js/22.1138bf38.js"><link rel="prefetch" href="/assets/js/23.bd7bb39d.js"><link rel="prefetch" href="/assets/js/24.dfc23fa7.js"><link rel="prefetch" href="/assets/js/25.30fab2be.js"><link rel="prefetch" href="/assets/js/26.cd1ee713.js"><link rel="prefetch" href="/assets/js/27.35a690e0.js"><link rel="prefetch" href="/assets/js/28.01e51b53.js"><link rel="prefetch" href="/assets/js/29.6b6122ac.js"><link rel="prefetch" href="/assets/js/3.b328b72f.js"><link rel="prefetch" href="/assets/js/30.31098dfe.js"><link rel="prefetch" href="/assets/js/31.d45b17aa.js"><link rel="prefetch" href="/assets/js/32.f30bf7ba.js"><link rel="prefetch" href="/assets/js/33.5f7ad133.js"><link rel="prefetch" href="/assets/js/34.b262d326.js"><link rel="prefetch" href="/assets/js/35.21e828ee.js"><link rel="prefetch" href="/assets/js/36.7d43e272.js"><link rel="prefetch" href="/assets/js/37.bd117701.js"><link rel="prefetch" href="/assets/js/39.111b7fad.js"><link rel="prefetch" href="/assets/js/4.0a5bf6cc.js"><link rel="prefetch" href="/assets/js/40.7d4363fe.js"><link rel="prefetch" href="/assets/js/41.343713ce.js"><link rel="prefetch" href="/assets/js/42.4fb6dd59.js"><link rel="prefetch" href="/assets/js/43.5642e367.js"><link rel="prefetch" href="/assets/js/44.85a99ec0.js"><link rel="prefetch" href="/assets/js/45.a624ea10.js"><link rel="prefetch" href="/assets/js/46.8481ef09.js"><link rel="prefetch" href="/assets/js/47.55140342.js"><link rel="prefetch" href="/assets/js/48.993aa1d3.js"><link rel="prefetch" href="/assets/js/49.995dc158.js"><link rel="prefetch" href="/assets/js/5.620815fe.js"><link rel="prefetch" href="/assets/js/50.71beee3d.js"><link rel="prefetch" href="/assets/js/51.f765ac42.js"><link rel="prefetch" href="/assets/js/52.f0194437.js"><link rel="prefetch" href="/assets/js/53.beed879e.js"><link rel="prefetch" href="/assets/js/54.2bfa6960.js"><link rel="prefetch" href="/assets/js/55.0d452fd0.js"><link rel="prefetch" href="/assets/js/56.afc23b54.js"><link rel="prefetch" href="/assets/js/57.25a0de8c.js"><link rel="prefetch" href="/assets/js/58.6a2e22c3.js"><link rel="prefetch" href="/assets/js/59.234ca4c7.js"><link rel="prefetch" href="/assets/js/6.e4c8cbb1.js"><link rel="prefetch" href="/assets/js/60.9d237f42.js"><link rel="prefetch" href="/assets/js/61.b9ad3844.js"><link rel="prefetch" href="/assets/js/62.62040256.js"><link rel="prefetch" href="/assets/js/63.a464e7db.js"><link rel="prefetch" href="/assets/js/64.46149f1b.js"><link rel="prefetch" href="/assets/js/65.ec3235b9.js"><link rel="prefetch" href="/assets/js/66.782f2680.js"><link rel="prefetch" href="/assets/js/67.575cb1e8.js"><link rel="prefetch" href="/assets/js/68.febe0d4b.js"><link rel="prefetch" href="/assets/js/69.6b8abb4b.js"><link rel="prefetch" href="/assets/js/7.23aaa1b7.js"><link rel="prefetch" href="/assets/js/70.ed2fbd28.js"><link rel="prefetch" href="/assets/js/71.d4918a67.js"><link rel="prefetch" href="/assets/js/72.9d24da4e.js"><link rel="prefetch" href="/assets/js/73.bd2c708e.js"><link rel="prefetch" href="/assets/js/74.49b9d79c.js"><link rel="prefetch" href="/assets/js/75.c249052a.js"><link rel="prefetch" href="/assets/js/76.c9ab5219.js"><link rel="prefetch" href="/assets/js/77.14430975.js"><link rel="prefetch" href="/assets/js/78.90edfddf.js"><link rel="prefetch" href="/assets/js/79.7d2360a7.js"><link rel="prefetch" href="/assets/js/8.f80c6e55.js"><link rel="prefetch" href="/assets/js/80.03b4beee.js"><link rel="prefetch" href="/assets/js/9.0c75976d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.35bcedcf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">有爱心安 - 花期</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>前端</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>编码基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>兼容处理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>面试</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>即时通讯</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>关键字</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>前端语言</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>Css</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>Html</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>Deno</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>Javascript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>Node</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading open"><span>React</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fronted/language/react/createProject.html" class="sidebar-link">新建项目</a></li><li><a href="/fronted/language/react/notes.html" class="sidebar-link">笔记</a></li><li><a href="/fronted/language/react/algorithm.html" aria-current="page" class="active sidebar-link">算法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fronted/language/react/algorithm.html#栈协调" class="sidebar-link">栈协调</a></li><li class="sidebar-sub-header"><a href="/fronted/language/react/algorithm.html#fiber协调" class="sidebar-link">Fiber协调</a></li><li class="sidebar-sub-header"><a href="/fronted/language/react/algorithm.html#理解fiber协调" class="sidebar-link">理解Fiber协调</a></li></ul></li><li><a href="/fronted/language/react/redux.html" class="sidebar-link">redux</a></li><li><a href="/fronted/language/react/blog.html" class="sidebar-link">博客</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>Typescript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>移动端</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>项目优化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>项目构建</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>软件</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>测试相关</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>工作总结</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据库</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>系统</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>语言</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="栈协调"><a href="#栈协调" class="header-anchor">#</a> 栈协调</h2> <h3 id="启发"><a href="#启发" class="header-anchor">#</a> 启发</h3> <ul><li>Diff性能突破关键在于分层对比</li> <li>类型一致的Node才有继续Diff的必要性</li> <li>key帮助我们尽可能的重用同一层级的节点</li></ul> <h3 id="分层对比-改变时间复杂度的决定性思路"><a href="#分层对比-改变时间复杂度的决定性思路" class="header-anchor">#</a> 分层对比：改变时间复杂度的决定性思路</h3> <h3 id="类型一致-减少递归-一刀切-的思路"><a href="#类型一致-减少递归-一刀切-的思路" class="header-anchor">#</a> 类型一致：减少递归“一刀切”的思路</h3> <h3 id="key属性-重用节点的关键"><a href="#key属性-重用节点的关键" class="header-anchor">#</a> key属性：重用节点的关键</h3> <h3 id="问题"><a href="#问题" class="header-anchor">#</a> 问题</h3> <p>栈协调机制下的<code>Diff</code>算法，其实是<strong>树的深度优先遍历过程</strong>，也就是一个<strong>同步的递归过程</strong>，意味着一旦更新开始，根本停不下来。当处理复杂度高、体量大的虚拟<code>DOM</code>树时，栈协调需要的调和时间会很长，意味着<strong>JavaScript 对主线程将长时间占用</strong>，进而导致渲染卡顿、无响应等问题</p> <hr> <hr> <h2 id="fiber协调"><a href="#fiber协调" class="header-anchor">#</a> <a href="https://www.xujun.org/note-131146.html" target="_blank" rel="noopener noreferrer">Fiber协调<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h2> <p>是实现<strong>增量渲染</strong>，换句话说就是把一个渲染任务分解为多个渲染任务，而后将其分散到多个帧里，是一种手段。目的，是为了实现任务的<strong>可中断、可恢复</strong>，并给不同的任务赋予不同的<strong>优先级</strong>，最终达到快速响应的体验</p> <h3 id="fiber核心-可中断、可恢复、不同的优先级"><a href="#fiber核心-可中断、可恢复、不同的优先级" class="header-anchor">#</a> Fiber核心：可中断、可恢复、不同的优先级</h3> <p>相对于栈协调，Fiber协调多出了调度器<code>Scheduler</code>，其更新的处理工作变成了</p> <ul><li>每个更新任务都会赋予一个优先级</li> <li>当更新任务抵达调度器时，高优先级的更新任务(A)会更快地被调度进入 <code>Reconciler</code> —— <strong>优先级</strong></li> <li>此时有新的更新任务(B)，调度器会检查它优先级，若高于当前任务(A)，处于当前<code>Reconciler</code>层的A任务会被中断，调度器将B任务推入<code>Reconciler</code>层 —— <strong>可中断</strong></li> <li>当B任务完成渲染后，新一轮调度开始，之前被中断的A任务将会被重新推入<code>Reconciler</code>层，继续它的渲染 —— <strong>可恢复</strong></li></ul> <h3 id="react架构分层和生命周期"><a href="#react架构分层和生命周期" class="header-anchor">#</a> React架构分层和生命周期</h3> <hr> <hr> <h2 id="理解fiber协调"><a href="#理解fiber协调" class="header-anchor">#</a> <a href="https://www.jianshu.com/p/22d4d3eed8c0" target="_blank" rel="noopener noreferrer">理解Fiber协调<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h2> <h3 id="博文"><a href="#博文" class="header-anchor">#</a> 博文</h3> <ul><li><a href="https://links.jianshu.com/go?to=https%3A%2F%2Fwww.zoo.team%2Farticle%2Fabout-react-fiber" target="_blank" rel="noopener noreferrer">前端工程师的自我修养：React Fiber 是如何实现更新过程可控的<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="react如何实现快速响应"><a href="#react如何实现快速响应" class="header-anchor">#</a> React如何实现快速响应</h3> <ul><li>CPU的瓶颈：当项目变得庞大、组件数量繁多、遇到<strong>大计算量</strong>的操作或者<strong>设备性能不足</strong>使得页面掉帧，导致卡顿。（引入<strong>Time Slicing 时间分片</strong>概念）</li> <li>IO的瓶颈：发送网络请求后，由于需要等待数据返回才能进一步操作导致不能快速响应。（引入<strong>Suspense</strong>概念）</li></ul> <h3 id="react的-先天不足-听说-vue-3-0-采用了动静结合的-dom-diff-react-为何不跟进"><a href="#react的-先天不足-听说-vue-3-0-采用了动静结合的-dom-diff-react-为何不跟进" class="header-anchor">#</a> React的“先天不足” —— 听说 <a href="https://blog.csdn.net/frontend_frank/article/details/114297890" target="_blank" rel="noopener noreferrer">Vue 3.0 采用了动静结合的 Dom diff<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，React 为何不跟进？</h3> <h3 id="从架构演变看不断进击的-react-都做过哪些优化"><a href="#从架构演变看不断进击的-react-都做过哪些优化" class="header-anchor">#</a> 从架构演变看不断进击的 React 都做过哪些优化？</h3> <h4 id="react渲染页面的两个阶段"><a href="#react渲染页面的两个阶段" class="header-anchor">#</a> React渲染页面的两个阶段</h4> <ul><li>调度阶段（reconciliation）：在这个阶段 React 会更新数据生成新的 Virtual DOM，然后通过Diff算法，快速找出需要更新的元素，放到更新队列中去，<strong>得到新的更新队列</strong>。</li> <li>渲染阶段（commit）：这个阶段 React 会遍历更新队列，<strong>将其所有的变更一次性更新到DOM上</strong>。</li></ul> <h4 id="react-15-架构"><a href="#react-15-架构" class="header-anchor">#</a> React 15 架构</h4> <p>React15架构可以分为两层：</p> <ul><li>Reconciler（协调器）—— 负责找出变化的组件；</li> <li>Renderer（渲染器）—— 负责将变化的组件渲染到页面上；</li></ul> <p>在React15及以前，Reconciler采用递归的方式创建虚拟DOM，<strong>递归过程是不能中断的</strong>。如果组件树的层级很深，递归会占用线程很多时间，递归更新时间超过了16ms，用户交互就会卡顿。</p> <h4 id="react16架构"><a href="#react16架构" class="header-anchor">#</a> React16架构</h4> <p>React16架构可以分为三层：</p> <ul><li>Scheduler（调度器）—— <strong>调度任务的优先级</strong>，高优任务优先进入Reconciler；</li> <li>Reconciler（协调器）—— 负责找出变化的组件：<strong>更新工作从递归变成了可以中断的循环过程。Reconciler内部采用了Fiber的架构</strong>；</li> <li>Renderer（渲染器）—— 负责将变化的组件渲染到页面上。</li></ul> <h4 id="react-17-优化"><a href="#react-17-优化" class="header-anchor">#</a> React 17 优化</h4> <p>React16的<strong>expirationTimes模型</strong>只能区分是否<code>&gt;=expirationTimes</code>决定节点是否更新。React17的<strong>lanes模型</strong>可以选定一个更新区间，并且动态的向区间中增减优先级，可以处理更细粒度的更新。</p> <h3 id="浏览器一帧都会干些什么以及requestidlecallback的启示"><a href="#浏览器一帧都会干些什么以及requestidlecallback的启示" class="header-anchor">#</a> 浏览器一帧都会干些什么以及requestIdleCallback的启示</h3> <h4 id="浏览器一帧都会干些什么"><a href="#浏览器一帧都会干些什么" class="header-anchor">#</a> 浏览器一帧都会干些什么？</h4> <p>目前浏览器大多是 60Hz（60帧/s），每一帧耗时也就是在 16.6ms 左右。那么在这一帧的（16.6ms） 过程中浏览器又干了些什么呢？</p> <ol><li><p>接受输入事件</p></li> <li><p>执行事件回调</p></li> <li><p>开始一帧</p></li> <li><p>执行 RAF (RequestAnimationFrame)</p></li> <li><p>页面布局，样式计算</p></li> <li><p>绘制渲染</p></li> <li><p>执行 RIC (RequestIdelCallback)</p> <blockquote><p>RIC 事件不是每一帧结束都会执行，只有在一帧的 16.6ms 中做完了前面 6 件事儿且还有剩余时间，才会执行。如果一帧执行结束后还有时间执行 RIC 事件，那么下一帧需要在事件执行结束才能继续渲染，所以 RIC 执行不要超过 30ms，如果长时间不将控制权交还给浏览器，会影响下一帧的渲染，导致页面出现卡顿和事件响应不及时。</p></blockquote></li></ol> <h3 id="requestidlecallback-的启示"><a href="#requestidlecallback-的启示" class="header-anchor">#</a> requestIdleCallback 的启示</h3> <p>Facebook 抛弃了 requestIdleCallback 的原生 API, 实现了功能更完备的requestIdleCallbackpolyfill：</p> <ul><li>浏览器兼容性；</li> <li>触发频率不稳定，受很多因素影响。比如当我们的浏览器切换tab后，之前tab注册的requestIdleCallback触发的频率会变得很低。</li></ul> <blockquote></blockquote> <p>参考</p> <ul><li><a href="https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2Ffacebook%2Freact%2Fissues%2F13206" target="_blank" rel="noopener noreferrer">requestIdleCallback 的 FPS 只有 20<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://links.jianshu.com/go?to=http%3A%2F%2Fwww.zhangyunling.com%2F702.html" target="_blank" rel="noopener noreferrer">requestIdleCallback-后台任务调度<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="fiber-为什么是-react-性能的一个飞跃"><a href="#fiber-为什么是-react-性能的一个飞跃" class="header-anchor">#</a> Fiber 为什么是 React 性能的一个飞跃？</h3> <h4 id="react-fiber-中的时间分片"><a href="#react-fiber-中的时间分片" class="header-anchor">#</a> React Fiber 中的时间分片</h4> <h4 id="fiber链表结构"><a href="#fiber链表结构" class="header-anchor">#</a> Fiber链表结构</h4> <p>链表相比顺序结构数据格式的<strong>好处</strong>就是：</p> <ol><li>操作更高效，比如顺序调整、删除，只需要改变节点的指针指向就好了。</li> <li>不仅可以根据当前节点找到下一个节点，在多向链表中，还可以找到他的父节点或者兄弟节点。</li></ol> <p>但链表也不是完美的，<strong>缺点</strong>就是：</p> <ol><li>比顺序结构数据更占用空间，因为每个节点对象还保存有指向下一个对象的指针。</li> <li>不能自由读取，必须找到他的上一个节点。</li></ol> <p>React 用<strong>空间换时间</strong>，更高效的操作可以方便根据优先级进行操作。同时<strong>可以根据当前节点找到其他节点，在下面提到的挂起和恢复过程中起到了关键作用</strong>。</p> <h3 id="react-fiber-是如何实现更新过程可控"><a href="#react-fiber-是如何实现更新过程可控" class="header-anchor">#</a> React Fiber 是如何实现更新过程可控？</h3> <p>Fiber核心：可中断、可恢复、不同的优先级</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/fronted/language/react/notes.html" class="prev">
        笔记
      </a></span> <span class="next"><a href="/fronted/language/react/redux.html">
        redux
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.74591230.js" defer></script><script src="/assets/js/2.662f3f24.js" defer></script><script src="/assets/js/38.701dbff2.js" defer></script>
  </body>
</html>
