(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{441:function(t,a,e){"use strict";e.r(a);var s=e(51),r=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"核心概念"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#核心概念"}},[t._v("#")]),t._v(" 核心概念")]),t._v(" "),e("h2",{attrs:{id:"入口-entry"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#入口-entry"}},[t._v("#")]),t._v(" "),e("a",{attrs:{href:"https://webpack.docschina.org/concepts/entry-points/",target:"_blank",rel:"noopener noreferrer"}},[t._v("入口 - Entry"),e("OutboundLink")],1)]),t._v(" "),e("h3",{attrs:{id:"概览"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#概览"}},[t._v("#")]),t._v(" 概览")]),t._v(" "),e("ul",[e("li",[t._v("默认值是 "),e("code",[t._v("./src/index.js")])]),t._v(" "),e("li",[t._v("可以指定一个（或多个）不同的入口起点")])]),t._v(" "),e("h3",{attrs:{id:"单个入口-简写-语法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#单个入口-简写-语法"}},[t._v("#")]),t._v(" 单个入口（简写）语法")]),t._v(" "),e("h3",{attrs:{id:"对象语法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#对象语法"}},[t._v("#")]),t._v(" 对象语法")]),t._v(" "),e("h3",{attrs:{id:"常见场景"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#常见场景"}},[t._v("#")]),t._v(" 常见场景")]),t._v(" "),e("ul",[e("li",[t._v("分离 app(应用程序) 和 vendor(第三方库) 入口")]),t._v(" "),e("li",[t._v("多页面应用程序")])]),t._v(" "),e("hr"),t._v(" "),e("h2",{attrs:{id:"输出-output"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#输出-output"}},[t._v("#")]),t._v(" 输出 - Output")]),t._v(" "),e("h3",{attrs:{id:"概览-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#概览-2"}},[t._v("#")]),t._v(" 概览")]),t._v(" "),e("ul",[e("li",[t._v("输出文件的默认值是 "),e("code",[t._v("./dist/main.js")])]),t._v(" "),e("li",[t._v("其他生成文件默认放置在 "),e("code",[t._v("./dist")]),t._v(" 文件夹中 （可通过path来进行配置）")])]),t._v(" "),e("h3",{attrs:{id:"多个入口起点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#多个入口起点"}},[t._v("#")]),t._v(" 多个入口起点")]),t._v(" "),e("h3",{attrs:{id:"对资源使用cdn和hash"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#对资源使用cdn和hash"}},[t._v("#")]),t._v(" 对资源使用CDN和hash")]),t._v(" "),e("hr"),t._v(" "),e("h2",{attrs:{id:"loader"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#loader"}},[t._v("#")]),t._v(" Loader")]),t._v(" "),e("h3",{attrs:{id:"概览-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#概览-3"}},[t._v("#")]),t._v(" 概览")]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("loader")]),t._v(" 让 webpack 能够去处理其他类型的文件，并将它们转换为有效 "),e("a",{attrs:{href:"https://webpack.docschina.org/concepts/modules",target:"_blank",rel:"noopener noreferrer"}},[t._v("模块"),e("OutboundLink")],1),t._v("，以供应用程序使用，以及被添加到依赖图中")]),t._v(" "),e("blockquote",[e("p",[t._v("webpack 只能理解 JavaScript 和 JSON 文件，这是 webpack 开箱可用的自带能力")])])]),t._v(" "),e("li",[e("p",[e("code",[t._v("rules")]),t._v(" 属性，里面包含两个必须属性："),e("code",[t._v("test")]),t._v(" 和 "),e("code",[t._v("use")])]),t._v(" "),e("blockquote",[e("p",[e("strong",[t._v("Tips:")])]),t._v(" "),e("p",[e("code",[t._v("test")]),t._v(" 属性，识别出哪些文件会被转换。")]),t._v(" "),e("p",[e("code",[t._v("use")]),t._v(" 属性，定义出在进行转换时，应该使用哪个 loader。")]),t._v(" "),e("p",[e("strong",[t._v("Warning:")])]),t._v(" "),e("p",[t._v("配置中定义 rules 时，要定义在 "),e("code",[t._v("module.rules")]),t._v(" 而不是 "),e("code",[t._v("rules")]),t._v(" 中")]),t._v(" "),e("p",[t._v("使用正则表达式匹配文件时，你不要为它添加引号("),e("code",[t._v("/\\.txt$/")]),t._v(" 与 "),e("code",[t._v("'/\\.txt$/'")]),t._v(" 或 "),e("code",[t._v('"/\\.txt$/"')]),t._v(" 不一样。前者指示 webpack 匹配任何以 .txt 结尾的文件，后者指示 webpack 匹配具有绝对路径 '.txt' 的单个文件)")])])])]),t._v(" "),e("h3",{attrs:{id:"使用方式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用方式"}},[t._v("#")]),t._v(" 使用方式")]),t._v(" "),e("ul",[e("li",[t._v("配置方式（推荐）")]),t._v(" "),e("li",[t._v("内联模式")])]),t._v(" "),e("h3",{attrs:{id:"loader特性"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#loader特性"}},[t._v("#")]),t._v(" Loader特性")]),t._v(" "),e("ul",[e("li",[t._v("支持链式调用")]),t._v(" "),e("li",[t._v("支持同步或者异步")]),t._v(" "),e("li",[t._v("是运行在Node.js中")]),t._v(" "),e("li",[t._v("通过options对象配置（任然支持query来配置，但是已经废弃）")]),t._v(" "),e("li",[t._v("除了常见的通过 "),e("code",[t._v("package.json")]),t._v(" 的 "),e("code",[t._v("main")]),t._v(" 来将一个 npm 模块导出为 loader，还可以在 module.rules 中使用 "),e("code",[t._v("loader")]),t._v(" 字段直接引用一个模块。")]),t._v(" "),e("li",[t._v("插件(plugin)可以为 loader 带来更多特性。")]),t._v(" "),e("li",[t._v("loader 能够产生额外的任意文件。")])]),t._v(" "),e("h3",{attrs:{id:"解析loader"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#解析loader"}},[t._v("#")]),t._v(" 解析Loader")]),t._v(" "),e("blockquote",[e("p",[t._v("loader 遵循标准 "),e("a",{attrs:{href:"https://webpack.docschina.org/concepts/module-resolution/",target:"_blank",rel:"noopener noreferrer"}},[t._v("模块解析"),e("OutboundLink")],1),t._v(" 规则。多数情况下，loader 将从 "),e("a",{attrs:{href:"https://webpack.docschina.org/concepts/module-resolution/#module-paths",target:"_blank",rel:"noopener noreferrer"}},[t._v("模块路径"),e("OutboundLink")],1),t._v(" 加载（通常是从 "),e("code",[t._v("npm install")]),t._v(", "),e("code",[t._v("node_modules")]),t._v(" 进行加载）。")]),t._v(" "),e("p",[t._v("我们预期 loader 模块导出为一个函数，并且编写为 Node.js 兼容的 JavaScript。通常使用 npm 进行管理 loader，但是也可以将应用程序中的文件作为自定义 loader。按照约定，loader 通常被命名为 "),e("code",[t._v("xxx-loader")]),t._v("（例如 "),e("code",[t._v("json-loader")]),t._v("）。更多详细信息，请查看 "),e("a",{attrs:{href:"https://webpack.docschina.org/contribute/writing-a-loader/",target:"_blank",rel:"noopener noreferrer"}},[t._v("编写一个 loader"),e("OutboundLink")],1),t._v("。")])]),t._v(" "),e("h2",{attrs:{id:"插件-plugin"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#插件-plugin"}},[t._v("#")]),t._v(" 插件 - Plugin")]),t._v(" "),e("p",[t._v("打包优化，资源管理，注入环境变量等等 - （"),e("strong",[t._v("loader 用于转换某些类型的模块，而插件则可以用于执行范围更广的任务")]),t._v("）")]),t._v(" "),e("h3",{attrs:{id:"剖析"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#剖析"}},[t._v("#")]),t._v(" 剖析")]),t._v(" "),e("blockquote",[e("p",[t._v("webpack "),e("strong",[t._v("插件")]),t._v("是一个具有 "),e("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/apply",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("apply")]),e("OutboundLink")],1),t._v(" 方法的 JavaScript 对象。"),e("code",[t._v("apply")]),t._v(" 方法会被 webpack compiler 调用，并且在 "),e("strong",[t._v("整个")]),t._v(" 编译生命周期都可以访问 compiler 对象。")]),t._v(" "),e("p",[e("strong",[t._v("ConsoleLogOnBuildWebpackPlugin.js")])]),t._v(" "),e("div",{staticClass:"language-javascript extra-class"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" pluginName "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ConsoleLogOnBuildWebpackPlugin'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConsoleLogOnBuildWebpackPlugin")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("apply")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("compiler")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   compiler"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hooks"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("run"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("tap")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pluginName"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("compilation")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'webpack 构建正在启动！'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nmodule"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ConsoleLogOnBuildWebpackPlugin"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("compiler hook 的 tap 方法的第一个参数，应该是驼峰式命名的插件名称。建议为此使用一个常量，以便它可以在所有 hook 中重复使用。")])]),t._v(" "),e("h3",{attrs:{id:"用法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#用法"}},[t._v("#")]),t._v(" 用法")]),t._v(" "),e("p",[t._v("由于"),e("strong",[t._v("插件")]),t._v("可以携带参数/选项，你必须在 webpack 配置中，向 "),e("code",[t._v("plugins")]),t._v(" 属性传入一个 "),e("code",[t._v("new")]),t._v(" 实例。")]),t._v(" "),e("h3",{attrs:{id:"配置方式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置方式"}},[t._v("#")]),t._v(" 配置方式")]),t._v(" "),e("div",{staticClass:"language-javascript extra-class"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" HtmlWebpackPlugin "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'html-webpack-plugin'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 通过 npm 安装")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" webpack "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'webpack'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 访问内置的插件")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" path "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'path'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  entry"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./path/to/my/entry/file.js'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  output"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    filename"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'my-first-webpack.bundle.js'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    path"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dist'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  module"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    rules"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        test"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token regex"}},[e("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),e("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("\\.(js|jsx)$")]),e("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        use"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'babel-loader'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  plugins"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("webpack"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ProgressPlugin")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HtmlWebpackPlugin")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" template"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/index.html'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("h3",{attrs:{id:"api方式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#api方式"}},[t._v("#")]),t._v(" Api方式")]),t._v(" "),e("div",{staticClass:"language-javascript extra-class"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" webpack "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'webpack'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 访问 webpack 运行时(runtime)")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" configuration "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./webpack.config.js'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" compiler "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("webpack")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("configuration"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("webpack"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ProgressPlugin")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("apply")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("compiler"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\ncompiler"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" stats")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("h2",{attrs:{id:"模式-mode"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#模式-mode"}},[t._v("#")]),t._v(" 模式 - Mode")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("默认值为 "),e("code",[t._v("production")])]),t._v(" "),e("blockquote",[e("p",[t._v("取值有 "),e("code",[t._v("development")]),t._v(", "),e("code",[t._v("production")]),t._v(" 或 "),e("code",[t._v("none")])])])])]),t._v(" "),e("h2",{attrs:{id:"浏览器兼容-browser-compatibility"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#浏览器兼容-browser-compatibility"}},[t._v("#")]),t._v(" 浏览器兼容 - Browser Compatibility")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("Webpack 支持所有符合 "),e("a",{attrs:{href:"https://kangax.github.io/compat-table/es5/",target:"_blank",rel:"noopener noreferrer"}},[t._v("ES5 标准"),e("OutboundLink")],1),t._v(" 的浏览器（不支持 IE8 及以下版本）")])]),t._v(" "),e("li",[e("p",[t._v("webpack 的 "),e("code",[t._v("import()")]),t._v(" 和 "),e("code",[t._v("require.ensure()")]),t._v(" 需要 "),e("code",[t._v("Promise")])]),t._v(" "),e("blockquote",[e("p",[t._v("想要支持旧版本浏览器，在使用这些表达式之前，还需要 "),e("a",{attrs:{href:"https://webpack.docschina.org/guides/shimming/",target:"_blank",rel:"noopener noreferrer"}},[t._v("提前加载 polyfill"),e("OutboundLink")],1)])])])]),t._v(" "),e("h2",{attrs:{id:"环境-environment"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#环境-environment"}},[t._v("#")]),t._v(" 环境 - Environment")]),t._v(" "),e("ul",[e("li",[t._v("Webpack 5 运行于 Node.js v10.13.0+ 的版本")])]),t._v(" "),e("hr"),t._v(" "),e("h1",{attrs:{id:"高级概念"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#高级概念"}},[t._v("#")]),t._v(" 高级概念")]),t._v(" "),e("h2",{attrs:{id:"配置-configuration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置-configuration"}},[t._v("#")]),t._v(" 配置 - Configuration")]),t._v(" "),e("h3",{attrs:{id:"基本配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#基本配置"}},[t._v("#")]),t._v(" 基本配置")]),t._v(" "),e("h4",{attrs:{id:"建议"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#建议"}},[t._v("#")]),t._v(" 建议")]),t._v(" "),e("ul",[e("li",[t._v("通过 "),e("code",[t._v("require(...)")]),t._v(" 引入其他文件")]),t._v(" "),e("li",[t._v("通过 "),e("code",[t._v("require(...)")]),t._v(" 使用 npm 下载的工具函数")]),t._v(" "),e("li",[t._v("使用 JavaScript 控制流表达式，例如 "),e("code",[t._v("?:")]),t._v(" 操作符")]),t._v(" "),e("li",[t._v("对 value 使用常量或变量赋值")]),t._v(" "),e("li",[t._v("编写并执行函数，生成部分配置")])]),t._v(" "),e("h4",{attrs:{id:"避免"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#避免"}},[t._v("#")]),t._v(" 避免")]),t._v(" "),e("ul",[e("li",[t._v("当使用 webpack CLI 工具时，访问 CLI 参数（应编写自己的 CLI 工具替代，或者"),e("a",{attrs:{href:"https://webpack.docschina.org/api/cli/#env",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用 "),e("code",[t._v("--env")]),e("OutboundLink")],1),t._v("）")]),t._v(" "),e("li",[t._v("导出不确定的结果（两次调用 webpack 应产生相同的输出文件）")]),t._v(" "),e("li",[t._v("编写超长的配置（应将配置文件拆分成多个")])]),t._v(" "),e("h3",{attrs:{id:"多个target"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#多个target"}},[t._v("#")]),t._v(" "),e("a",{attrs:{href:"https://webpack.docschina.org/configuration/configuration-types/#exporting-multiple-configurations",target:"_blank",rel:"noopener noreferrer"}},[t._v("多个target"),e("OutboundLink")],1)]),t._v(" "),e("h3",{attrs:{id:"其它语言进行配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#其它语言进行配置"}},[t._v("#")]),t._v(" "),e("a",{attrs:{href:"https://webpack.docschina.org/configuration/configuration-languages/",target:"_blank",rel:"noopener noreferrer"}},[t._v("其它语言进行配置"),e("OutboundLink")],1)]),t._v(" "),e("ul",[e("li",[t._v("Typescript")]),t._v(" "),e("li",[t._v("CoffeScript")]),t._v(" "),e("li",[t._v("Babel and jsx")])]),t._v(" "),e("h2",{attrs:{id:"模块-module"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#模块-module"}},[t._v("#")]),t._v(" 模块 - Module")]),t._v(" "),e("p",[t._v("模块, 一切皆模块， 一个模块对应一个文件。")]),t._v(" "),e("h3",{attrs:{id:"何为-webpack-模块"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#何为-webpack-模块"}},[t._v("#")]),t._v(" 何为 webpack 模块")]),t._v(" "),e("p",[t._v("与 "),e("a",{attrs:{href:"https://nodejs.org/api/modules.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Node.js 模块"),e("OutboundLink")],1),t._v("相比，webpack "),e("em",[t._v("模块")]),t._v(" 能以各种方式表达它们的依赖关系。下面是一些示例：")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import",target:"_blank",rel:"noopener noreferrer"}},[t._v("ES2015 "),e("code",[t._v("import")]),e("OutboundLink")],1),t._v(" 语句")]),t._v(" "),e("li",[e("a",{attrs:{href:"http://www.commonjs.org/specs/modules/1.0/",target:"_blank",rel:"noopener noreferrer"}},[t._v("CommonJS"),e("OutboundLink")],1),t._v(" "),e("code",[t._v("require()")]),t._v(" 语句")]),t._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/amdjs/amdjs-api/blob/master/AMD.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("AMD"),e("OutboundLink")],1),t._v(" "),e("code",[t._v("define")]),t._v(" 和 "),e("code",[t._v("require")]),t._v(" 语句")]),t._v(" "),e("li",[t._v("css/sass/less 文件中的 "),e("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/CSS/@import",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("@import")]),t._v(" 语句"),e("OutboundLink")],1),t._v("。")]),t._v(" "),e("li",[t._v("stylesheet "),e("code",[t._v("url(...)")]),t._v(" 或者 HTML "),e("code",[t._v("<img src=...>")]),t._v(" 文件中的图片链接。")])]),t._v(" "),e("h3",{attrs:{id:"支持的模块类型"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#支持的模块类型"}},[t._v("#")]),t._v(" 支持的模块类型")]),t._v(" "),e("p",[t._v("Webpack 天生支持如下模块类型：")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://webpack.docschina.org/guides/ecma-script-modules",target:"_blank",rel:"noopener noreferrer"}},[t._v("ECMAScript 模块"),e("OutboundLink")],1)]),t._v(" "),e("li",[t._v("CommonJS 模块")]),t._v(" "),e("li",[t._v("AMD 模块")]),t._v(" "),e("li",[e("a",{attrs:{href:"https://webpack.docschina.org/guides/asset-modules",target:"_blank",rel:"noopener noreferrer"}},[t._v("Assets"),e("OutboundLink")],1)]),t._v(" "),e("li",[t._v("WebAssembly 模块")])]),t._v(" "),e("blockquote",[e("p",[e("a",{attrs:{href:"https://auth0.com/blog/javascript-module-systems-showdown/",target:"_blank",rel:"noopener noreferrer"}},[t._v("JavaScript Module Systems Showdown"),e("OutboundLink")],1)])]),t._v(" "),e("h2",{attrs:{id:"模块解析-module-resolution"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#模块解析-module-resolution"}},[t._v("#")]),t._v(" 模块解析 - Module Resolution")]),t._v(" "),e("p",[t._v("resolver 是一个帮助寻找模块绝对路径的库。 一个模块可以作为另一个模块的依赖模块，然后被后者引用，如下：")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" foo "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'path/to/module'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 或者")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'path/to/module'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("所依赖的模块可以是来自应用程序的代码或第三方库。 resolver 帮助 webpack 从每个 "),e("code",[t._v("require")]),t._v("/"),e("code",[t._v("import")]),t._v(" 语句中，找到需要引入到 bundle 中的模块代码。 当打包模块时，webpack 使用 "),e("a",{attrs:{href:"https://github.com/webpack/enhanced-resolve",target:"_blank",rel:"noopener noreferrer"}},[t._v("enhanced-resolve"),e("OutboundLink")],1),t._v(" 来解析文件路径。")]),t._v(" "),e("h3",{attrs:{id:"解析规则-通过enhanced-resolve"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#解析规则-通过enhanced-resolve"}},[t._v("#")]),t._v(" 解析规则（通过enhanced-resolve）")]),t._v(" "),e("h4",{attrs:{id:"绝对路径"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#绝对路径"}},[t._v("#")]),t._v(" 绝对路径")]),t._v(" "),e("h4",{attrs:{id:"相对路径"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#相对路径"}},[t._v("#")]),t._v(" 相对路径")]),t._v(" "),e("h4",{attrs:{id:"模块路径"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#模块路径"}},[t._v("#")]),t._v(" 模块路径")]),t._v(" "),e("h3",{attrs:{id:"解析loader-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#解析loader-2"}},[t._v("#")]),t._v(" 解析loader")]),t._v(" "),e("p",[t._v("loader 的解析规则也遵循特定的规范。但是 "),e("a",{attrs:{href:"https://webpack.docschina.org/configuration/resolve/#resolveloader",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("resolveLoader")]),e("OutboundLink")],1),t._v(" 配置项可以为 loader 设置独立的解析规则。")]),t._v(" "),e("h3",{attrs:{id:"缓存"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#缓存"}},[t._v("#")]),t._v(" 缓存")]),t._v(" "),e("p",[t._v("每次文件系统访问文件都会被缓存，以便于更快触发对同一文件的多个并行或串行请求。在 "),e("a",{attrs:{href:"https://webpack.docschina.org/configuration/watch/#watch",target:"_blank",rel:"noopener noreferrer"}},[t._v("watch 模式"),e("OutboundLink")],1),t._v(" 下，只有修改过的文件会被从缓存中移出。如果关闭 watch 模式，则会在每次编译前清理缓存。")]),t._v(" "),e("h2",{attrs:{id:"模块联邦-module-federation"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#模块联邦-module-federation"}},[t._v("#")]),t._v(" 模块联邦 - Module Federation")]),t._v(" "),e("h3",{attrs:{id:"背景"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[t._v("#")]),t._v(" 背景")]),t._v(" "),e("p",[t._v("多个独立的构建可以组成一个应用程序，这些独立的构建之间不应该存在依赖关系，因此可以单独开发和部署它们。")]),t._v(" "),e("h3",{attrs:{id:"底层概念"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#底层概念"}},[t._v("#")]),t._v(" 底层概念")]),t._v(" "),e("h3",{attrs:{id:"高级概念-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#高级概念-2"}},[t._v("#")]),t._v(" 高级概念")]),t._v(" "),e("h3",{attrs:{id:"构建块"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#构建块"}},[t._v("#")]),t._v(" 构建块")]),t._v(" "),e("h3",{attrs:{id:"概念目标"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#概念目标"}},[t._v("#")]),t._v(" 概念目标")]),t._v(" "),e("h3",{attrs:{id:"用例"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#用例"}},[t._v("#")]),t._v(" 用例")]),t._v(" "),e("h3",{attrs:{id:"动态远程容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#动态远程容器"}},[t._v("#")]),t._v(" 动态远程容器")]),t._v(" "),e("h3",{attrs:{id:"基于promise得动态remote"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#基于promise得动态remote"}},[t._v("#")]),t._v(" 基于promise得动态remote")]),t._v(" "),e("h3",{attrs:{id:"动态publicpath"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#动态publicpath"}},[t._v("#")]),t._v(" 动态publicPath")]),t._v(" "),e("h3",{attrs:{id:"故障排除"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#故障排除"}},[t._v("#")]),t._v(" 故障排除")]),t._v(" "),e("h2",{attrs:{id:"依赖图-dependency-graph"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#依赖图-dependency-graph"}},[t._v("#")]),t._v(" 依赖图 - Dependency graph")]),t._v(" "),e("p",[t._v("每当一个文件依赖另一个文件时，webpack 都会将文件视为直接存在 "),e("em",[t._v("依赖关系")]),t._v("。这使得 webpack 可以获取非代码资源，如 images 或 web 字体等。并会把它们作为 "),e("em",[t._v("依赖")]),t._v(" 提供给应用程序。")]),t._v(" "),e("p",[t._v("当 webpack 处理应用程序时，它会根据命令行参数中或配置文件中定义的模块列表开始处理。 从 "),e("a",{attrs:{href:"https://webpack.docschina.org/concepts/entry-points/",target:"_blank",rel:"noopener noreferrer"}},[e("em",[t._v("入口")]),e("OutboundLink")],1),t._v(" 开始，webpack 会递归的构建一个 "),e("em",[t._v("依赖关系图")]),t._v("，这个依赖图包含着应用程序中所需的每个模块，然后将所有模块打包为少量的 "),e("em",[t._v("bundle")]),t._v(" —— 通常只有一个 —— 可由浏览器加载。")]),t._v(" "),e("blockquote",[e("p",[t._v("对于 "),e("em",[t._v("HTTP/1.1")]),t._v(" 的应用程序来说，由 webpack 构建的 bundle 非常强大。当浏览器发起请求时，它能最大程度的减少应用的等待时间。而对于 "),e("em",[t._v("HTTP/2")]),t._v(" 来说，你还可以使用"),e("a",{attrs:{href:"https://webpack.docschina.org/guides/code-splitting/",target:"_blank",rel:"noopener noreferrer"}},[t._v("代码分割"),e("OutboundLink")],1),t._v("进行进一步优化。")])]),t._v(" "),e("h2",{attrs:{id:"target"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#target"}},[t._v("#")]),t._v(" target")]),t._v(" "),e("h3",{attrs:{id:"用法-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#用法-2"}},[t._v("#")]),t._v(" 用法")]),t._v(" "),e("p",[e("strong",[e("a",{attrs:{href:"https://webpack.docschina.org/configuration/target/",target:"_blank",rel:"noopener noreferrer"}},[t._v("target 可用值"),e("OutboundLink")],1),t._v("。")])]),t._v(" "),e("h3",{attrs:{id:"多taget"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#多taget"}},[t._v("#")]),t._v(" 多taget")]),t._v(" "),e("h2",{attrs:{id:"manifest"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#manifest"}},[t._v("#")]),t._v(" manifest")]),t._v(" "),e("p",[t._v("webpack使用场景有三种代码类型：")]),t._v(" "),e("ol",[e("li",[t._v("你或你的团队编写的源码。")]),t._v(" "),e("li",[t._v('你的源码会依赖的任何第三方的 library 或 "vendor" 代码。')]),t._v(" "),e("li",[t._v("webpack 的 runtime 和 "),e("strong",[t._v("manifest")]),t._v("，管理所有模块的交互。")])]),t._v(" "),e("h3",{attrs:{id:"runtime"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#runtime"}},[t._v("#")]),t._v(" runtime")]),t._v(" "),e("h3",{attrs:{id:"manifest-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#manifest-2"}},[t._v("#")]),t._v(" manifest")]),t._v(" "),e("h3",{attrs:{id:"问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#问题"}},[t._v("#")]),t._v(" 问题")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("即使某些内容明显没有修改，某些 hash 还是会改变 （因为注入的 runtime 和 manifest 在每次构建后都会发生变化）")]),t._v(" "),e("blockquote",[e("ul",[e("li",[e("a",{attrs:{href:"https://survivejs.com/webpack/optimizing/separating-manifest/",target:"_blank",rel:"noopener noreferrer"}},[t._v("分离 manifest"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://medium.com/webpack/predictable-long-term-caching-with-webpack-d3eee1d3fa31",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用 webpack 提供可预测的长效缓存"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://webpack.docschina.org/guides/caching/",target:"_blank",rel:"noopener noreferrer"}},[t._v("缓存"),e("OutboundLink")],1)])])])])]),t._v(" "),e("h2",{attrs:{id:"模块热替换-hot-module-replacement"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#模块热替换-hot-module-replacement"}},[t._v("#")]),t._v(" 模块热替换 - Hot module replacement")]),t._v(" "),e("p",[t._v("通过以下几种方式，来显著加快开发速度：")]),t._v(" "),e("ul",[e("li",[t._v("保留在完全重新加载页面期间丢失的应用程序状态。")]),t._v(" "),e("li",[t._v("只更新变更内容，以节省宝贵的开发时间。")]),t._v(" "),e("li",[t._v("在源代码中 CSS/JS 产生修改时，会立刻在浏览器中进行更新，这几乎相当于在浏览器 devtools 直接更改样式。")])]),t._v(" "),e("h3",{attrs:{id:"运行原理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#运行原理"}},[t._v("#")]),t._v(" 运行原理")]),t._v(" "),e("h4",{attrs:{id:"应用程序"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#应用程序"}},[t._v("#")]),t._v(" 应用程序")]),t._v(" "),e("ol",[e("li",[t._v("应用程序要求 HMR runtime 检查更新。")]),t._v(" "),e("li",[t._v("HMR runtime 异步地下载更新，然后通知应用程序。")]),t._v(" "),e("li",[t._v("应用程序要求 HMR runtime 应用更新。")]),t._v(" "),e("li",[t._v("HMR runtime 同步地应用更新。")])]),t._v(" "),e("h4",{attrs:{id:"complier"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#complier"}},[t._v("#")]),t._v(" complier")]),t._v(" "),e("p",[t._v('除了普通资源，compiler 需要发出 "update"，将之前的版本更新到新的版本。"update" 由两部分组成：')]),t._v(" "),e("ol",[e("li",[t._v("更新后的 "),e("a",{attrs:{href:"https://webpack.docschina.org/concepts/manifest",target:"_blank",rel:"noopener noreferrer"}},[t._v("manifest"),e("OutboundLink")],1),t._v(" (JSON)")]),t._v(" "),e("li",[t._v("一个或多个 updated chunk (JavaScript)")])]),t._v(" "),e("h4",{attrs:{id:"模块"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#模块"}},[t._v("#")]),t._v(" 模块")]),t._v(" "),e("ul",[e("li",[t._v("HMR 是可选功能，只会影响包含 HMR 代码的模块")]),t._v(" "),e("li",[t._v("在一个模块中实现了 HMR 接口,更新就会冒泡(bubble up),整组依赖模块都会被重新加载")])]),t._v(" "),e("blockquote",[e("p",[t._v("HMR 是可选功能，只会影响包含 HMR 代码的模块。举个例子，通过 "),e("a",{attrs:{href:"https://github.com/webpack-contrib/style-loader",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("style-loader")]),e("OutboundLink")],1),t._v(" 为 style 追加补丁。为了运行追加补丁，"),e("code",[t._v("style-loader")]),t._v(" 实现了 HMR 接口；当它通过 HMR 接收到更新，它会使用新的样式替换旧的样式。")]),t._v(" "),e("p",[t._v("类似的，当在一个模块中实现了 HMR 接口，你可以描述出当模块被更新后发生了什么。然而在多数情况下，不需要在每个模块中强行写入 HMR 代码。如果一个模块没有 HMR 处理函数，更新就会冒泡(bubble up)。这意味着某个单独处理函数能够更新整个模块树。如果在模块树的一个单独模块被更新，那么整组依赖模块都会被重新加载。")])]),t._v(" "),e("h4",{attrs:{id:"runtime-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#runtime-2"}},[t._v("#")]),t._v(" runtime")]),t._v(" "),e("p",[t._v("对于模块系统运行时(module system runtime)，会发出额外代码，来跟踪模块 "),e("code",[t._v("parents")]),t._v(" 和 "),e("code",[t._v("children")]),t._v(" 关系。在管理方面，runtime 支持两个方法 "),e("code",[t._v("check")]),t._v(" 和 "),e("code",[t._v("apply")]),t._v("。")]),t._v(" "),e("h2",{attrs:{id:"为什么选择webpack"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#为什么选择webpack"}},[t._v("#")]),t._v(" 为什么选择webpack")]),t._v(" "),e("h2",{attrs:{id:"内部原理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#内部原理"}},[t._v("#")]),t._v(" 内部原理")]),t._v(" "),e("h3",{attrs:{id:"主要部分"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#主要部分"}},[t._v("#")]),t._v(" 主要部分")]),t._v(" "),e("ul",[e("li",[t._v("项目中使用的每个文件都是一个 "),e("a",{attrs:{href:"https://webpack.docschina.org/concepts/modules/",target:"_blank",rel:"noopener noreferrer"}},[t._v("模块"),e("OutboundLink")],1)]),t._v(" "),e("li",[t._v("通过互相引用，这些模块会形成一个图("),e("code",[t._v("ModuleGraph")]),t._v(")数据结构。")])]),t._v(" "),e("h3",{attrs:{id:"chunk"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#chunk"}},[t._v("#")]),t._v(" chunk")]),t._v(" "),e("p",[t._v("chunk 有两种形式：")]),t._v(" "),e("ul",[e("li",[e("p",[e("code",[t._v("initial(初始化)")]),t._v(" 是入口起点的 main chunk。此 chunk 包含为入口起点指定的所有模块及其依赖项。")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("non-initial")]),t._v(" 是可以延迟加载的块。可能会出现在使用 "),e("a",{attrs:{href:"https://webpack.docschina.org/guides/code-splitting/#dynamic-imports",target:"_blank",rel:"noopener noreferrer"}},[t._v("动态导入(dynamic imports)"),e("OutboundLink")],1),t._v(" 或者 "),e("a",{attrs:{href:"https://webpack.docschina.org/plugins/split-chunks-plugin/",target:"_blank",rel:"noopener noreferrer"}},[t._v("SplitChunksPlugin"),e("OutboundLink")],1),t._v(" 时。")]),t._v(" "),e("blockquote",[e("p",[e("code",[t._v("non-initial")]),t._v(" chunk 没有名称，因此会使用唯一 ID 来替代名称。 在使用动态导入时，我们可以通过使用 "),e("a",{attrs:{href:"https://webpack.docschina.org/api/module-methods/#magic-comments",target:"_blank",rel:"noopener noreferrer"}},[t._v("magic comment(魔术注释)"),e("OutboundLink")],1),t._v(" 来显式指定 chunk 名称：")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/* webpackChunkName: "app" */')]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./app.jsx'")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("App")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  ReactDOM"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("App "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" root"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])])]),t._v(" "),e("p",[t._v("每个 chunk 都有对应的 "),e("strong",[t._v("asset(资源)")]),t._v("。资源，是指输出文件（即打包结果）。")]),t._v(" "),e("h3",{attrs:{id:"output"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#output"}},[t._v("#")]),t._v(" output")]),t._v(" "),e("p",[t._v("输出文件的名称会受配置中的两个字段的影响：")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://webpack.docschina.org/configuration/output/#outputfilename",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("output.filename")]),e("OutboundLink")],1),t._v(" - 用于 "),e("code",[t._v("initial")]),t._v(" chunk 文件")]),t._v(" "),e("li",[e("a",{attrs:{href:"https://webpack.docschina.org/configuration/output/#outputchunkfilename",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("output.chunkFilename")]),e("OutboundLink")],1),t._v(" - 用于 "),e("code",[t._v("non-initial")]),t._v(" chunk 文件")]),t._v(" "),e("li",[t._v("在某些情况下，使用 "),e("code",[t._v("initial")]),t._v(" 和 "),e("code",[t._v("non-initial")]),t._v(" 的 chunk 时，可以使用 "),e("code",[t._v("output.filename")]),t._v("。")])]),t._v(" "),e("p",[t._v("这些字段中会有一些 "),e("a",{attrs:{href:"https://webpack.docschina.org/configuration/output/#template-strings",target:"_blank",rel:"noopener noreferrer"}},[t._v("占位符"),e("OutboundLink")],1),t._v("。常用的占位符如下：")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("[id]")]),t._v(" - chunk id（例如 "),e("code",[t._v("[id].js")]),t._v(" -> "),e("code",[t._v("485.js")]),t._v("）")]),t._v(" "),e("li",[e("code",[t._v("[name]")]),t._v(" - chunk name（例如 "),e("code",[t._v("[name].js")]),t._v(" -> "),e("code",[t._v("app.js")]),t._v("）。如果 chunk 没有名称，则会使用其 id 作为名称")]),t._v(" "),e("li",[e("code",[t._v("[contenthash]")]),t._v(" - 输出文件内容的 md4-hash（例如 "),e("code",[t._v("[contenthash].js")]),t._v(" -> "),e("code",[t._v("4ea6ff1de66c537eb9b2.js")]),t._v("）")])])])}),[],!1,null,null,null);a.default=r.exports}}]);